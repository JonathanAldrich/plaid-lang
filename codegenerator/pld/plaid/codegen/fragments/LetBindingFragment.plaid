package plaid.codegen.fragments;

state LetBindingFragment {
	method visitLetBinding(node) {
		val /* ID */ y = this.y;
	
		this.setLocation(node.token);
		this.out.declareFinalVar(this.out.plaidObjectType, node.x.name);
		
		this.y = node.x;
		node.exp.accept(this);

		if (!node.x.name.contains("$plaid")) {
			// set the immutability of the variable
			this.out.insertIntoScope(this.out.localScope, node.x.name, !node.mutable);
		};
		
		this.y = y;
		node.body.accept(this);
	}
}