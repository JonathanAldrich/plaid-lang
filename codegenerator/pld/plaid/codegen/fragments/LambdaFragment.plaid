package plaid.codegen.fragments;

state LambdaFragment {
	method visitLambda(node) {
		//this.out.setLocation(node.token);
		val /* ID */ y = this.y;
		
		var /*ID*/ freshID = this.idgen.getId();
		
		this.out.assignToNewLambda(y.name, node.x.name);  //y = new lambda(...{ {
		
		this.out.declareVar(this.out.plaidObjectType, freshID.name);
		this.y = freshID;
		node.body.accept(this);
		this.out.ret(freshID.name);
		
		this.out.closeAnonymousDeclaration(); //}});");
	}
}