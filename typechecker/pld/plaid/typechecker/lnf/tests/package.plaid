package plaid.typechecker.lnf.tests;

import plaid.ast.*;

val () -> unique Token makeToken = fn() => {
	new Token {
		val immutable Integer beginLine = 0;
		val immutable Integer beginColumn = 0;
		val immutable Integer endLine = 0;
		val immutable Integer endColumn = 0;
		val immutable String image = ""; 
	};
};

val (immutable String) -> unique Token makeID = fn(immutable String n) => {
	new ID {
		val immutable Token token = makeToken();
		val immutable String name = n;
	};
};

val (unique Expression) -> void rewrite = fn (unique Expression e) => {
	val unique PrintVisitor printVisitor = new PrintVisitor;
	val unique LetNormalFormVisitor lnfVisitor = new LetNormalFormVisitor;
	
	java.lang.System.out.println("\nREWRITE TEST");
	e.accept(printVisitor);
	java.lang.System.out.println("---------------------");
	e.accept(lnfVisitor);
	e.accept(printVisitor);
};

method main() {
	varTests();
	fieldReadTests();
	assignmentTests();
}