package plaid.typechecker.lnf.tests;

import plaid.ast.*;
import plaid.ast.visitor.PrintVisitor;
import plaid.typechecker.lnf.LetNormalFormVisitor;

val () -> void destructiveReadTests = fn() => {
	val unique DestructiveDereference bareRead = new DestructiveDereference {
		val immutable Token token = makeToken();
		val unique Expression left = makeID("x");
		val unique ID right = makeID("f");
	};

	rewrite(bareRead);
	
	val unique DestructiveDereference complexRead = new DestructiveDereference {
		val immutable Token token = makeToken();
		val unique Expression left = new DestructiveDereference {
			val immutable Token token = makeToken();
			val unique Expression left = makeID("x");
			val unique ID right = makeID("f");
		};
		val unique ID right = makeID("g");
	};
	
	rewrite(complexRead);
};