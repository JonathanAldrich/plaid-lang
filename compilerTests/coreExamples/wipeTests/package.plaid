package coreExamples.wipeTests;

import java.lang.System;

var counter = 0;

val increment = fn () => { counter = counter + 1 };

state A { val x = increment(); }

state B case of A { }

state C case of A { }

state M { }

state N case of M { }

method main() {
	val x = new C with N;
	x <<- B;
	System.out.print("Blow away on states: ");
	match (x) {
		case N { System.out.println("fails - N should be gone") }
		default { System.out.println("works") }
	};
	
	System.out.print("Counter should have been incremented twice: ");
	match (counter == 2) {
		case True {
			System.out.println("works");
		}
		case False {
			System.out.println("fails - counter = " + counter);
		}	
	};
	
	
}

