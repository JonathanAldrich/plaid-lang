package plaid.aeminiumexamples.webserver;

state Socket {
    var socket = 5;
    var reader = 5;
    var writer = 5;
    
    @sequential
    method immutable String readLine() [unique Socket this] {        
        this.reader.readLine();
    }
    
    @sequential 
    method void writeLine(immutable String msg) [unique Socket this] {
        this.writer.append(msg + "\n");
    }
    
    @sequential 
    method void flush() [unique Socket this] {
        this.writer.flush();
    }
    
    @sequential 
    method void close() [unique Socket this]  {
       this.socket.close();
    }
}