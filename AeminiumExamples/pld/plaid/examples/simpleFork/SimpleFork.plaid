package plaid.exmaples.simpleFork;

state SimpleFork {
    method void loop(unique SimpleFork socket) [ immutable SimpleFork this ] {
        val unique SimpleFork client = this.accept(socket);
        this.serveClient(client);
        this.loop(socket);
    }
    
    method unique SimpleFork accept(unique SimpleFork socket) [ immutable SimpleFork this ] {
        new SimpleFork;
    }
    
    method void serveClient(unique SimpleFork client) [ immutable SimpleFork this ] {}
}