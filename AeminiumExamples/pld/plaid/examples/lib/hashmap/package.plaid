package plaid.examples.lib.hashmap;

import plaid.examples.lib.hashmap.fine.makeFineHashmap;
//import plaid.examples.lib.hashmap.global.makeGlobalHashmap;

/********************************************************************************
 ** ABORT function 
 *******************************************************************************/

@sequential
method void ABORT(immutable String msg) {
    printLine(msg);
    java.lang.System.exit(1);
}

/********************************************************************************
 ** main function 
 *******************************************************************************/
@sequential
method void main() {
    val unique Hashmap hm = makeFineHashmap(2);
    val immutable Number ONE = makeNumber(1);
    
    val immutable Boolean c1 = hm.containsUnique(ONE);
    printLine("hashmap contains ONE : " + c1.toString());
    
    printLine("hashmap add ONE");
    hm.addUnique(ONE,ONE);

    val immutable Boolean c2 = hm.containsUnique(ONE);
    printLine("hashmap contains ONE : " + c2.toString());
}

/********************************************************************************
 ** factory methods 
 *******************************************************************************/
@cheap
@sequential
method immutable Number makeNumber(immutable Integer value) {
    val num = new Number; //new Number { val immutable Integer value = value; };
    num.value = value;
    num
}