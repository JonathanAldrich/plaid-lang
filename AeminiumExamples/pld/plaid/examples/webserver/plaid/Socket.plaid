package plaid.examples.webserver.plaid;

state Socket {
    val socket;
    val reader;
    val writer;
    
    // unsafe 
    method immutable String readLine() [unique Socket this] {        
        this.reader.readLine();
    }
    
    // unsafe 
    method void writeLine(immutable String msg) [unique Socket this] {
        this.writer.append(msg + "\n");
    }
    
    // unsafe 
    method void flush() [unique Socket this] {
        this.writer.flush();
    }
}